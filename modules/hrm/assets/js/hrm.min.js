!function(a){"use strict";var b={initialize:function(){a("ul.erp-dashboard-announcement").on("click","a.mark-read",this.dashboard.markAnnouncementRead),a("ul.erp-dashboard-announcement").on("click","a.view-full",this.dashboard.viewAnnouncement),a("ul.erp-dashboard-announcement").on("click",".announcement-title a",this.dashboard.viewAnnouncementTitle),a("ul.erp-list").on("click",".send-wish",this.dashboard.sendBirthdayWish),a("body").on("click","a#erp-new-dept",this.department.create),a(".erp-hr-depts").on("click","a.submitdelete",this.department.remove),a(".erp-hr-depts").on("click","span.edit a",this.department.edit),a("body").on("click","a#erp-new-designation",this.designation.create),a(".erp-hr-designation").on("click","a.submitdelete",this.designation.remove),a(".erp-hr-designation").on("click","span.edit a",this.designation.edit),a(".erp-hr-employees").on("click","a#erp-employee-new",this.employee.create),a(".erp-hr-employees").on("click","span.edit a",this.employee.edit),a(".erp-hr-employees").on("click","a.submitdelete",this.employee.remove),a(".erp-hr-employees").on("click","a.submitrestore",this.employee.restore),a(".erp-hr-employees").on("click","a#erp-empl-status",this.employee.updateJobStatus),a(".erp-hr-employees").on("click","a#erp-empl-compensation",this.employee.updateJobStatus),a(".erp-hr-employees").on("click","a#erp-empl-jobinfo",this.employee.updateJobStatus),a(".erp-hr-employees").on("click","td.action a.remove",this.employee.removeHistory),a(".erp-hr-employees").on("click","a#erp-employee-print",this.employee.printData),a("body").on("focusout","input#erp-hr-user-email",this.employee.checkUserEmail),a("body").on("click","a#erp-hr-create-wp-user-to-employee",this.employee.makeUserEmployee),a(".erp-employee-single").on("click","a#erp-employee-terminate",this.employee.terminateEmployee),a(".erp-employee-single").on("click","input#erp-hr-employee-status-update",this.employee.changeEmployeeStatus),a(".erp-hr-employees").on("click","a#erp-empl-performance-reviews",this.employee.updatePerformance),a(".erp-hr-employees").on("click","a#erp-empl-performance-comments",this.employee.updatePerformance),a(".erp-hr-employees").on("click","a#erp-empl-performance-goals",this.employee.updatePerformance),a(".erp-hr-employees").on("click",".performance-tab-wrap td.action a.performance-remove",this.employee.removePerformance),a(".erp-hr-employees").on("click","a#erp-empl-add-exp",this.employee.general.create),a(".erp-hr-employees").on("click","a.work-experience-edit",this.employee.general.create),a(".erp-hr-employees").on("click","a.work-experience-delete",this.employee.general.remove),a(".erp-hr-employees").on("click","a#erp-empl-add-education",this.employee.general.create),a(".erp-hr-employees").on("click","a.education-edit",this.employee.general.create),a(".erp-hr-employees").on("click","a.education-delete",this.employee.general.remove),a(".erp-hr-employees").on("click","a#erp-empl-add-dependent",this.employee.general.create),a(".erp-hr-employees").on("click","a.dependent-edit",this.employee.general.create),a(".erp-hr-employees").on("click","a.dependent-delete",this.employee.general.remove),a(".erp-hr-employees").on("submit",".note-tab-wrap form",this.employee.addNote),a(".erp-hr-employees").on("click",".note-tab-wrap input#erp-load-notes",this.employee.loadNotes),a(".erp-hr-employees").on("click",".note-tab-wrap a.delete_note",this.employee.deleteNote),a("body").on("click","a#erp-set-emp-photo",this.employee.setPhoto),a("body").on("click","a.erp-remove-photo",this.employee.removePhoto),a("body").on("erp-hr-after-new-dept",this.department.afterNew),a("body").on("erp-hr-after-new-desig",this.designation.afterNew),this.initTipTip()},initToggleCheckbox:function(){var b=!1;a("tbody").children().children(".check-column").find(":checkbox").click(function(c){if("undefined"==c.shiftKey)return!0;if(c.shiftKey){if(!b)return!0;checks=a(b).closest("form").find(":checkbox").filter(":visible:enabled"),first=checks.index(b),last=checks.index(this),checked=a(this).prop("checked"),0<first&&0<last&&first!=last&&(sliced=last>first?checks.slice(first,last):checks.slice(last,first),sliced.prop("checked",function(){return!!a(this).closest("tr").is(":visible")&&checked}))}b=this;var d=a(this).closest("tbody").find(":checkbox").filter(":visible:enabled").not(":checked");return a(this).closest("table").children("thead, tfoot").find(":checkbox").prop("checked",function(){return 0===d.length}),!0}),a("thead, tfoot").find(".check-column :checkbox").on("click.wp-toggle-checkboxes",function(b){var c=a(this),d=c.closest("table"),e=c.prop("checked"),f=b.shiftKey||c.data("wp-toggle");d.children("tbody").filter(":visible").children().children(".check-column").find(":checkbox").prop("checked",function(){return!a(this).is(":hidden,:disabled")&&(f?!a(this).prop("checked"):!!e)}),d.children("thead,  tfoot").filter(":visible").children().children(".check-column").find(":checkbox").prop("checked",function(){return!f&&!!e})})},initTipTip:function(){a(".erp-tips").tipTip({defaultPosition:"top",fadeIn:100,fadeOut:100})},initDateField:function(){a(".erp-date-field").datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,yearRange:"-100:+5"})},reloadPage:function(){a(".erp-area-left").load(window.location.href+" #erp-area-left-inner",function(){a(".select2").select2()})},dashboard:{markAnnouncementRead:function(b){b.preventDefault();var c=a(this);c.closest("li").hasClass("unread")&&wp.ajax.send("erp_hr_announcement_mark_read",{data:{id:c.data("row_id"),_wpnonce:wpErpHr.nonce},success:function(a){c.closest("li").removeClass("unread").addClass("read"),c.addClass("erp-hide")},error:function(a){alert(a)}})},viewAnnouncementTitle:function(b){b.preventDefault();var c=a(this).closest("li").find("a.view-full");wp.ajax.send("erp_hr_announcement_view",{data:{id:c.data("row_id"),_wpnonce:wpErpHr.nonce},success:function(b){a.erpPopup({title:b.title,button:"",id:"erp-hr-announcement",content:"<p>"+b.content+"</p>",extraClass:"midium"}),c.closest("li").removeClass("unread"),c.siblings(".mark-read").addClass("erp-hide")},error:function(a){alert(a)}})},viewAnnouncement:function(b){b.preventDefault();var c=a(this);wp.ajax.send("erp_hr_announcement_view",{data:{id:c.data("row_id"),_wpnonce:wpErpHr.nonce},success:function(b){a.erpPopup({title:b.title,button:"",id:"erp-hr-announcement",content:"<p>"+b.content+"</p>",extraClass:"midium"}),c.closest("li").removeClass("unread"),c.siblings(".mark-read").addClass("erp-hide")},error:function(a){alert(a)}})},sendBirthdayWish:function(b){b.preventDefault();var c=a(this);a(".wait").show(),c.find("i").hide(),wp.ajax.send("erp_hr_birthday_wish",{data:{employee_user_id:c.data("user_id"),_wpnonce:wpErpHr.nonce},success:function(b){a(".wait").hide(),alert(b)},error:function(a){alert(a)}})}},department:{afterNew:function(b,c){var d=a(".erp-hr-dept-drop-down");wperp.scriptReload("erp_hr_script_reload","tmpl-erp-new-employee"),d.append('<option selected="selected" value="'+c.id+'">'+c.title+"</option>"),d.select2().select2("val",c.id)},reload:function(){a("#erp-dept-table-wrap").load(window.location.href+" #erp-dept-table-wrap",function(){b.initToggleCheckbox()})},tempReload:function(){wperp.scriptReload("erp_hr_new_dept_tmp_reload","tmpl-erp-new-dept")},create:function(c){c.preventDefault();var d=a(this),e=d.data("single");a.erpPopup({title:wpErpHr.popup.dept_title,button:wpErpHr.popup.dept_submit,id:"erp-hr-new-department",content:wperp.template("erp-new-dept")().trim(),extraClass:"smaller",onSubmit:function(c){wp.ajax.send({data:this.serialize(),success:function(d){b.department.reload(),"1"!=e?a("body").trigger("erp-hr-after-new-dept",[d]):b.department.tempReload(),c.closeModal()},error:function(a){c.showError(a)}})}})},edit:function(c){c.preventDefault();var d=a(this);a.erpPopup({title:wpErpHr.popup.dept_update,button:wpErpHr.popup.dept_update,id:"erp-hr-new-department",content:wp.template("erp-new-dept")().trim(),extraClass:"smaller",onReady:function(){var b=this;a("header",b).after(a('<div class="loader"></div>').show()),wp.ajax.send("erp-hr-get-dept",{data:{id:d.data("id"),_wpnonce:wpErpHr.nonce},success:function(c){a(".loader",b).remove(),a("#dept-title",b).val(c.name),a("#dept-desc",b).val(c.data.description),a("#dept-parent",b).val(c.data.parent),a("#dept-lead",b).val(c.data.lead),a("#dept-id",b).val(c.id),a("#dept-action",b).val("erp-hr-update-dept"),a('#dept-parent option[value="'+d.data("id")+'"]',b).attr("disabled","disabled")}})},onSubmit:function(a){wp.ajax.send({data:this.serialize(),success:function(){b.department.reload(),b.department.tempReload(),a.closeModal()},error:function(b){a.showError(b)}})}})},remove:function(c){c.preventDefault();var d=a(this);confirm(wpErpHr.delConfirmDept)&&wp.ajax.send("erp-hr-del-dept",{data:{_wpnonce:wpErpHr.nonce,id:d.data("id")},success:function(){d.closest("tr").fadeOut("fast",function(){a(this).remove(),b.department.tempReload()})},error:function(a){alert(a)}})}},designation:{afterNew:function(c,d){var e=a(".erp-hr-desi-drop-down");wperp.scriptReload("erp_hr_script_reload","tmpl-erp-new-employee"),e.append('<option selected="selected" value="'+d.id+'">'+d.title+"</option>"),b.employee.select2AddMoreActive("erp-hr-desi-drop-down"),e.select2("val",d.id)},reload:function(){a(".erp-hr-designation").load(window.location.href+" .erp-hr-designation",function(){b.initToggleCheckbox()})},create:function(c){c.preventDefault();var d=a(this).data("single");a.erpPopup({title:wpErpHr.popup.desig_title,button:wpErpHr.popup.desig_submit,id:"erp-hr-new-designation",content:wp.template("erp-new-desig")().trim(),extraClass:"smaller",onSubmit:function(c){wp.ajax.send({data:this.serialize(),success:function(e){b.designation.reload(),"1"!=d&&a("body").trigger("erp-hr-after-new-desig",[e]),c.closeModal()},error:function(a){c.showError(a)}})}})},edit:function(c){c.preventDefault();var d=a(this);a.erpPopup({title:wpErpHr.popup.desig_update,button:wpErpHr.popup.desig_update,content:wp.template("erp-new-desig")().trim(),id:"erp-hr-new-designation",extraClass:"smaller",onReady:function(){var b=this;a("header",b).after(a('<div class="loader"></div>').show()),wp.ajax.send("erp-hr-get-desig",{data:{id:d.data("id"),_wpnonce:wpErpHr.nonce},success:function(c){a(".loader",b).remove(),a("#desig-title",b).val(c.name),a("#desig-desc",b).val(c.data.description),a("#desig-id",b).val(c.id),a("#desig-action",b).val("erp-hr-update-desig")}})},onSubmit:function(a){wp.ajax.send({data:this.serialize(),success:function(){b.designation.reload(),a.closeModal()},error:function(b){a.showError(b)}})}})},remove:function(b){b.preventDefault();var c=a(this);confirm(wpErpHr.delConfirmDept)&&wp.ajax.send("erp-hr-del-desig",{data:{_wpnonce:wpErpHr.nonce,id:c.data("id")},success:function(){c.closest("tr").fadeOut("fast",function(){a(this).remove()})},error:function(a){alert(a)}})}},employee:{reload:function(){a(".erp-hr-employees-wrap").load(window.location.href+" .erp-hr-employees-wrap-inner",function(){b.initToggleCheckbox()})},setPhoto:function(b){b.preventDefault(),b.stopPropagation();var c;if(c)return void c.open();c=wp.media({title:wpErpHr.emp_upload_photo,button:{text:wpErpHr.emp_set_photo}}),c.on("select",function(){c.state().get("selection").map(function(b){b=b.toJSON();var c='<img src="'+b.url+'" alt="" />';c+='<input type="hidden" id="emp-photo-id" name="personal[photo_id]" value="'+b.id+'" />',c+='<a href="#" class="erp-remove-photo">&times;</a>',a(".photo-container",".erp-employee-form").html(c)})}),c.open()},removePhoto:function(b){b.preventDefault();var c=wpErpHr.asset_url+"/images/mystery-person.png",d='<img src="'+c+'" alt="">';d+='<input type="hidden" name="personal[photo_id]" id="emp-photo-id" value="0">',d+='<a href="#" id="erp-set-emp-photo" class="button-primary"><i class="fa fa-cloud-upload"></i>'+wpErpHr.emp_upload_photo+"</a>",a(".photo-container",".erp-employee-form").html(d)},create:function(c){void 0!==c&&c.preventDefault(),void 0!==wpErpHr.employee_empty&&a.erpPopup({title:wpErpHr.popup.employee_title,button:wpErpHr.popup.employee_create,id:"erp-new-employee-popup",content:wperp.template("erp-new-employee")(wpErpHr.employee_empty).trim(),onReady:function(){b.initDateField(),a(".select2").select2(),b.employee.select2Action("erp-hrm-select2"),b.employee.select2AddMoreContent(),a("#user_notification").on("click",function(){a(this).is(":checked")?a(".show-if-notification").show():a(".show-if-notification").hide()}),a("#advanced_fields").click(function(){a(this).is(" :checked ")?(a(".employee-work").show(),a(".employee-personal").show()):(a(".employee-work").hide(),a(".employee-personal").hide())})},onSubmit:function(b){a("button[type=submit]",".erp-modal").attr("disabled","disabled"),wp.ajax.send("erp-hr-employee-new",{data:this.serialize(),success:function(a){b.enableButton(),b.closeModal(),void 0!==a.url&&(window.location.href=a.url)},error:function(a){b.enableButton(),b.showError(a)}})}})},select2AddMoreContent:function(){var c=a(".erp-hrm-select2-add-more");a.each(c,function(a,c){b.employee.select2AddMoreActive(c)})},select2AddMoreActive:function(b){var c=a(b).data("id");a(b).select2({width:"element",language:{noResults:function(){return'<a href="#" class="button button-primary" id="'+c+'">Add New</a>'}},escapeMarkup:function(a){return a}})},select2Action:function(b){a("."+b).select2({width:"element"})},edit:function(c){c.preventDefault();var d=a(this);a.erpPopup({title:wpErpHr.popup.employee_update,button:wpErpHr.popup.employee_update,id:"erp-employee-edit",onReady:function(){var c=this;a("header",c).after(a('<div class="loader"></div>').show()),wp.ajax.send("erp-hr-emp-get",{data:{id:d.data("id"),_wpnonce:wpErpHr.nonce},success:function(d){var e=wp.template("erp-new-employee")(d);a(".content",c).html(e),a(".loader",c).remove(),b.initDateField(),a(".select2").select2(),b.employee.select2Action("erp-hrm-select2"),b.employee.select2AddMoreContent(),a("#advanced_fields").click(function(){a(this).is(" :checked ")?(a(".employee-work").show(),a(".employee-personal").show()):(a(".employee-work").hide(),a(".employee-personal").hide())}),a("div[data-selected]",c).each(function(){var b=a(this),c=b.data("selected");""!==c&&(b.find("select").val(c).trigger("change"),b.find("input[type=radio][value='"+c+"']").prop("checked",!0),a.each(b.find("input[type=checkbox]"),function(b,d){-1!=a.inArray(a(d).val(),c.split(","))&&a(d).prop("checked",!0)}))}),a('#work_reporting_to option[value="'+d.id+'"]',c).attr("disabled","disabled")}})},onSubmit:function(a){a.disableButton(),wp.ajax.send({data:this.serialize(),success:function(c){b.employee.reload(),a.enableButton(),a.closeModal()},error:function(b){a.enableButton(),a.showError(b)}})}})},remove:function(c){c.preventDefault();var d=a(this);confirm(wpErpHr.delConfirmEmployee)&&wp.ajax.send("erp-hr-emp-delete",{data:{_wpnonce:wpErpHr.nonce,id:d.data("id"),hard:d.data("hard")},success:function(){d.closest("tr").fadeOut("fast",function(){a(this).remove(),b.employee.reload()})},error:function(a){alert(a)}})},restore:function(c){c.preventDefault();var d=a(this);confirm(wpErpHr.restoreConfirmEmployee)&&wp.ajax.send("erp-hr-emp-restore",{data:{_wpnonce:wpErpHr.nonce,id:d.data("id")},success:function(){d.closest("tr").fadeOut("fast",function(){a(this).remove(),b.employee.reload()})},error:function(a){alert(a)}})},general:{create:function(c){void 0!==c&&c.preventDefault();var d=a(this);a.erpPopup({title:d.data("title"),content:wp.template(d.data("template"))(d.data("data")),extraClass:"smaller",id:"erp-hr-new-general",button:d.data("button"),onReady:function(){b.initDateField()},onSubmit:function(a){wp.ajax.send({data:this.serializeObject(),success:function(){b.reloadPage(),a.closeModal()},error:function(b){a.enableButton(),a.showError(b)}})}})},remove:function(c){c.preventDefault();var d=a(this);confirm(wpErpHr.confirm)&&wp.ajax.send(d.data("action"),{data:{id:d.data("id"),employee_id:d.data("employee_id"),_wpnonce:wpErpHr.nonce},success:function(){b.reloadPage()},error:function(a){alert(a)}})}},updateJobStatus:function(c){void 0!==c&&c.preventDefault();var d=a(this);a.erpPopup({title:d.data("title"),button:wpErpHr.popup.update_status,id:"erp-hr-update-job-status",content:"",extraClass:"smaller",onReady:function(){var c=wp.template(d.data("template"))(window.wpErpCurrentEmployee);a(".content",this).html(c),b.initDateField(),a(".row[data-selected]",this).each(function(){var b=a(this),c=b.data("selected");""!==c&&b.find("select").val(c)})},onSubmit:function(a){wp.ajax.send({data:this.serializeObject(),success:function(){b.reloadPage(),a.closeModal()},error:function(b){a.enableButton(),a.showError(b)}})}})},removeHistory:function(c){c.preventDefault(),confirm(wpErpHr.confirm)&&wp.ajax.send("erp-hr-emp-delete-history",{data:{history_id:a(this).data("id"),user_id:wpErpCurrentEmployee.user_id,_wpnonce:wpErpHr.nonce},success:function(){b.reloadPage()}})},printData:function(a){a.preventDefault(),window.print()},checkUserEmail:function(){var b=a(this),c=b.val(),d=b.closest("form").find("#erp-employee-id").val(),e=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return!(""==c||!e.test(c))&&("0"==d&&void wp.ajax.send("erp_hr_check_user_exist",{data:{email:c,_wpnonce:wpErpHr.nonce},success:function(){var c=b.closest("form");c.find(".modal-suggession").fadeOut(300,function(){a(this).remove()}),c.find("button[type=submit]").removeAttr("disabled")},error:function(c){var d=b.closest("form");d.find("button[type=submit]").attr("disabled","disabled"),"employee"==c.type&&(d.find(".modal-suggession").remove(),d.find("header.modal-header").append('<div class="modal-suggession">'+wpErpHr.employee_exit+"</div>")),"wp_user"==c.type&&(d.find(".modal-suggession").remove(),d.find("header.modal-header").append('<div class="modal-suggession">'+wpErpHr.make_employee_text+' <a href="#" id="erp-hr-create-wp-user-to-employee" data-user_id="'+c.data.ID+'">'+wpErpHr.create_employee_text+"</a></div>")),a(".modal-suggession").hide().slideDown(function(){d.find(".content-container").css({marginTop:"15px"})})}}))},makeUserEmployee:function(c){c.preventDefault();var d=a(this),e=d.data("user_id");d.closest(".modal-suggession").append('<div class="erp-loader" style="top:9px; right:10px;"></div>'),wp.ajax.send("erp-hr-convert-wp-to-employee",{data:{user_id:e,_wpnonce:wpErpHr.nonce},success:function(){d.closest(".modal-suggession").find(".erp-loader").remove(),d.closest(".erp-modal").remove(),a(".erp-modal-backdrop").remove(),b.employee.reload(),a.erpPopup({title:wpErpHr.popup.employee_update,button:wpErpHr.popup.employee_update,id:"erp-employee-edit",onReady:function(){var c=this;a("header",c).after(a('<div class="loader"></div>').show()),wp.ajax.send("erp-hr-emp-get",{data:{id:e,_wpnonce:wpErpHr.nonce},success:function(d){var e=wp.template("erp-new-employee")(d);a(".content",c).html(e),a(".loader",c).remove(),b.initDateField(),a("div[data-selected]",c).each(function(){var b=a(this),c=b.data("selected");""!==c&&b.find("select").val(c).trigger("change")}),a('#work_reporting_to option[value="'+d.id+'"]',c).attr("disabled","disabled")}})},onSubmit:function(a){a.disableButton(),wp.ajax.send({data:this.serialize(),success:function(c){b.employee.reload(),a.enableButton(),a.closeModal()},error:function(b){a.enableButton(),a.showError(b)}})}})},error:function(a){alert(a)}})},addNote:function(c){c.preventDefault();var d=a(this),e=d.find("input[type=submit]");e.attr("disabled","disabled"),d.find(".erp-note-loader").show(),wp.ajax.send({data:d.serializeObject(),success:function(){a.get(window.location.href,function(c){a("ul.notes-list li").length<0?a("ul.notes-list").prepend(a(c).find("ul.notes-list").after()):a("ul.notes-list").prepend(a(c).find("ul.notes-list li").first()),a("ul.notes-list li").length>10&&a("ul.notes-list li").last().remove(),b.employee.showLoadMoreBtn(),d.find(".erp-note-loader").hide(),d.find("textarea").val(""),e.removeAttr("disabled")})},error:function(){e.removeAttr("disabled"),d.find(".erp-note-loader").hide()}})},showLoadMoreBtn:function(){a("ul.notes-list li").length>=10?a(".wperp-load-more-btn").show():a(".wperp-load-more-btn").hide()},loadNotes:function(b){b.preventDefault();var c=a(this),d={action:"erp-load-more-notes",user_id:c.data("user_id"),total_no:c.data("total_no"),offset_no:c.data("offset_no")};c.closest("p").append('<span class="erp-loader" style="margin:4px 0px 0px 10px"></span>').find(".erp-loader").show(),c.attr("disabled",!0),wp.ajax.send({data:d,success:function(b){c.data("offset_no",parseInt(d.total_no)+parseInt(d.offset_no)),a(b.content).appendTo(c.closest(".note-tab-wrap").find("ul.notes-list")).hide().fadeIn(),c.removeAttr("disabled"),a(".erp-loader").remove()},error:function(a){alert(a)}})},deleteNote:function(c){if(c.preventDefault(),confirm(wpErpHr.delConfirmEmployeeNote)){var d=a(this),e={action:"erp-delete-employee-note",note_id:d.data("note_id"),user_id:wpErpCurrentEmployee.user_id,_wpnonce:wpErpHr.nonce};wp.ajax.send({data:e,success:function(c){d.closest("li").fadeOut(400,function(){a(this).remove(),b.employee.showLoadMoreBtn()})},error:function(a){alert(a)}})}},updatePerformance:function(c){void 0!==c&&c.preventDefault();var d=a(this);a.erpPopup({title:d.data("title"),button:wpErpHr.popup.update_status,id:"erp-hr-update-performance",content:"",extraClass:"smaller",onReady:function(){var c=wp.template(d.data("template"))(window.wpErpCurrentEmployee);a(".content",this).html(c),b.initDateField(),b.employee.select2Action("erp-hrm-select2"),a(".row[data-selected]",this).each(function(){var b=a(this),c=b.data("selected");""!==c&&b.find("select").val(c)})},onSubmit:function(a){wp.ajax.send({data:this.serializeObject(),success:function(){b.reloadPage(),a.closeModal()},error:function(b){a.enableButton(),a.showError(b)}})}})},removePerformance:function(c){c.preventDefault(),confirm(wpErpHr.confirm)&&wp.ajax.send({data:{action:"erp-hr-emp-delete-performance",id:a(this).data("id"),user_id:a(this).data("userid"),_wpnonce:wpErpHr.nonce},success:function(){b.reloadPage()}})},terminateEmployee:function(c){void 0!==c&&c.preventDefault();var d=a(this);if(d.data("data"))var e=d.data("data");else var e=window.wpErpCurrentEmployee;a.erpPopup({title:d.data("title"),button:wpErpHr.popup.terminate,id:"erp-hr-employee-terminate",content:"",extraClass:"smaller",onReady:function(){var c=wp.template(d.data("template"))(e);a(".content",this).html(c),b.initDateField(),a(".row[data-selected]",this).each(function(){var b=a(this),c=b.data("selected");""!==c&&b.find("select").val(c)}),b.employee.select2Action("erp-hrm-select2")},onSubmit:function(a){wp.ajax.send({data:this.serializeObject(),success:function(){b.reloadPage(),a.closeModal()},error:function(b){a.enableButton(),a.showError(b)}})}})},activateEmployee:function(c){c.preventDefault(),confirm(wpErpHr.confirm)&&wp.ajax.send({data:{action:"erp-hr-emp-activate",id:a(this).data("id"),_wpnonce:wpErpHr.nonce},success:function(){b.reloadPage()}})},changeEmployeeStatus:function(c){c.preventDefault();var d=a(this),e=d.closest("form"),f=e.find("select#erp-hr-employee-status-option"),g=f.val(),h=f.attr("data-selected");if("terminated"==g)g!=h?a.erpPopup({title:d.data("title"),button:wpErpHr.popup.terminate,id:"erp-hr-employee-terminate",content:"",extraClass:"smaller",onReady:function(){var c=wp.template("erp-employment-terminate")({});a(".content",this).html(c),b.initDateField(),b.employee.select2Action("erp-hrm-select2")},onSubmit:function(a){wp.ajax.send({data:this.serializeObject(),success:function(){b.reloadPage(),a.closeModal()},error:function(b){a.enableButton(),a.showError(b)}})}}):alert(wpErpHr.popup.already_terminate);else if("active"==g)if(g!=h){var d=a(this);a.erpPopup({title:wpErpHr.popup.employment_status,button:wpErpHr.popup.update_status,id:"erp-hr-update-job-status",content:"",extraClass:"smaller",onReady:function(){var c=wp.template("erp-employment-status")(window.wpErpCurrentEmployee);a(".content",this).html(c),b.initDateField()},onSubmit:function(a){wp.ajax.send({data:this.serializeObject(),success:function(){a.closeModal(),e.submit()},error:function(b){a.enableButton(),a.showError(b)}})}})}else alert(wpErpHr.popup.already_active);else e.submit()}}};a(function(){b.initialize()})}(jQuery);